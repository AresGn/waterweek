<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title data-i18n="gallery_title">Galerie Photos</title>
    <link rel="stylesheet" href="css/variables.css">
    <link rel="stylesheet" href="css/styles.css">
    <link rel="stylesheet" href="css/responsive.css">
    <link rel="stylesheet" href="css/mobile-menu.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&family=Outfit:wght@400;500;600;700;800&display=swap" rel="stylesheet">
    <!-- Link Swiper's CSS -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/swiper@11/swiper-bundle.min.css" />
    <!-- Préchargement des polices pour améliorer les performances -->
    <link rel="preload" href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&family=Outfit:wght@400;500;600;700;800&display=swap" as="style">
    <!-- Meta tags SEO -->
    <meta name="description" data-i18n="meta_description" content="Galerie photos de la Semaine de l'Eau 2025 - Événement international sur les enjeux de l'eau à Cotonou, Bénin.">
    <meta name="keywords" content="galerie, photos, eau, Cotonou, Bénin, conférence, développement durable">
    <!-- Favicon -->
    <link rel="icon" type="image/png" sizes="32x32" href="https://i.ibb.co/bRJqChct/carte-du-lieu.png">
    <!-- Styles spécifiques à la galerie -->
    <style>
        :root {
            --gallery-primary: #0078e7;
            --gallery-secondary: #00a0e7;
            --gallery-accent: #00c2ff;
            --gallery-dark: #1a1a2e;
            --gallery-light: #f5f7fa;
            --gallery-white: #ffffff;
            --gallery-gray: #707070;
            --gallery-overlay: rgba(0, 120, 231, 0.8);
        }
        
        .gallery-page {
            padding-top: 120px;
            background-color: var(--gallery-light);
            min-height: 100vh;
        }
        
        .gallery-heading {
            text-align: center;
            margin-bottom: 3rem;
            padding: 0 1rem;
        }
        
        .gallery-heading h1 {
            font-family: var(--font-secondary);
            font-weight: 800;
            font-size: 3.5rem;
            color: var(--gallery-dark);
            position: relative;
            display: inline-block;
            margin-bottom: 1.5rem;
        }
        
        .gallery-heading h1::after {
            content: '';
            position: absolute;
            bottom: -10px;
            left: 50%;
            transform: translateX(-50%);
            width: 120px;
            height: 4px;
            background: linear-gradient(90deg, var(--gallery-primary), var(--gallery-secondary));
            border-radius: 2px;
        }
        
        .gallery-heading p {
            font-size: 1.2rem;
            color: var(--gallery-gray);
            max-width: 600px;
            margin: 0 auto;
        }
        
        .gallery-container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 0 1.5rem;
        }
        
        /* Style simple pour les liens de filtre */
        .simple-filters {
            display: flex;
            flex-wrap: wrap;
            justify-content: center;
            gap: 15px;
            margin: 30px 0 50px 0;
            position: static;
        }
        
        .simple-filter {
            padding: 8px 20px;
            border: 2px solid #0078e7;
            border-radius: 5px;
            color: #1a1a2e;
            font-weight: 600;
            cursor: pointer;
            background: #fff;
            transition: all 0.2s ease;
            text-decoration: none;
        }
        
        .simple-filter:hover {
            background: #e6f2ff;
        }
        
        .simple-filter.active {
            background: #0078e7;
            color: white;
        }
        
        /* Featured Slider */
        .featured-gallery {
            position: relative;
            margin-bottom: 3.5rem;
            border-radius: 20px;
            overflow: hidden;
            box-shadow: 0 15px 35px rgba(0, 0, 0, 0.1);
        }
        
        .featured-heading {
            display: flex;
            align-items: center;
            margin-bottom: 1.5rem;
        }
        
        .featured-heading h2 {
            font-family: var(--font-secondary);
            font-weight: 700;
            font-size: 1.8rem;
            color: var(--gallery-dark);
            margin-right: auto;
        }
        
        .featured-swiper {
            width: 100%;
            height: 70vh;
            max-height: 700px;
            border-radius: 20px;
            overflow: hidden;
        }
        
        .featured-slide {
            text-align: center;
            background: #fff;
            display: flex;
            justify-content: center;
            align-items: center;
            position: relative;
            width: 100%;
            height: 100%;
            overflow: hidden;
            border-radius: 20px;
        }
        
        .featured-slide img {
            display: block;
            width: 100%;
            height: 100%;
            object-fit: cover;
            transition: transform 0.8s ease;
        }
        
        .featured-slide:hover img {
            transform: scale(1.05);
        }
        
        .featured-caption {
            position: absolute;
            bottom: 0;
            left: 0;
            right: 0;
            background: linear-gradient(to top, rgba(0, 0, 0, 0.8), transparent);
            color: var(--gallery-white);
            padding: 3rem 2rem 2rem;
            text-align: left;
            opacity: 1;
            transition: all 0.3s ease;
        }
        
        .featured-caption h3 {
            font-family: var(--font-secondary);
            font-weight: 700;
            font-size: 1.8rem;
            margin-bottom: 0.5rem;
        }
        
        .featured-caption p {
            font-family: var(--font-primary);
            font-size: 1.1rem;
            opacity: 0.9;
        }
        
        .featured-category {
            position: absolute;
            top: 1.5rem;
            right: 1.5rem;
            background: var(--gallery-primary);
            color: var(--gallery-white);
            padding: 0.5rem 1rem;
            border-radius: 50px;
            font-size: 0.85rem;
            font-weight: 600;
            z-index: 2;
        }
        
        /* Swiper button styles */
        .swiper-button-next,
        .swiper-button-prev {
            color: var(--gallery-white);
            background: rgba(0, 0, 0, 0.3);
            width: 50px;
            height: 50px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.3s ease;
        }
        
        .swiper-button-next:hover,
        .swiper-button-prev:hover {
            background: var(--gallery-primary);
            transform: translateY(-2px);
        }
        
        .swiper-button-next:after,
        .swiper-button-prev:after {
            font-size: 20px;
            font-weight: bold;
        }
        
        .swiper-pagination-bullet {
            width: 12px;
            height: 12px;
            background: var(--gallery-white);
            opacity: 0.7;
        }
        
        .swiper-pagination-bullet-active {
            background: var(--gallery-primary);
            opacity: 1;
        }
        
        .autoplay-progress {
            position: absolute;
            right: 16px;
            bottom: 16px;
            z-index: 10;
            width: 48px;
            height: 48px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            color: var(--gallery-primary);
        }
        
        .autoplay-progress svg {
            --progress: 0;
            position: absolute;
            left: 0;
            top: 0px;
            z-index: 10;
            width: 100%;
            height: 100%;
            stroke-width: 4px;
            stroke: var(--gallery-primary);
            fill: none;
            stroke-dashoffset: calc(125.6px * (1 - var(--progress)));
            stroke-dasharray: 125.6;
            transform: rotate(-90deg);
        }
        
        /* Main Gallery Grid */
        .gallery-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(320px, 1fr));
            gap: 1.8rem;
            margin-bottom: 3rem;
        }
        
        .gallery-item {
            position: relative;
            overflow: hidden;
            border-radius: 16px;
            box-shadow: 0 10px 20px rgba(0, 0, 0, 0.08);
            aspect-ratio: 1/1;
            cursor: pointer;
            transition: all 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
        }
        
        .gallery-item:hover {
            transform: translateY(-8px);
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.15);
        }
        
        .gallery-item img {
            width: 100%;
            height: 100%;
            object-fit: cover;
            transition: transform 0.6s ease;
        }
        
        .gallery-item:hover img {
            transform: scale(1.08);
        }
        
        .gallery-caption {
            position: absolute;
            bottom: 0;
            left: 0;
            right: 0;
            background: linear-gradient(to top, rgba(0, 0, 0, 0.8), transparent);
            color: var(--gallery-white);
            padding: 2rem 1.5rem 1.5rem;
            opacity: 0;
            transform: translateY(30px);
            transition: all 0.4s ease;
        }
        
        .gallery-item:hover .gallery-caption {
            opacity: 1;
            transform: translateY(0);
        }
        
        .gallery-caption h4 {
            font-weight: 600;
            margin-bottom: 0.5rem;
        }
        
        .gallery-item-overlay {
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: linear-gradient(to bottom, rgba(0, 0, 0, 0.2), rgba(0, 0, 0, 0.6));
            opacity: 0;
            transition: opacity 0.4s ease;
        }
        
        .gallery-item:hover .gallery-item-overlay {
            opacity: 1;
        }
        
        .gallery-category-tag {
            position: absolute;
            top: 1rem;
            left: 1rem;
            background: var(--gallery-primary);
            color: var(--gallery-white);
            padding: 0.4rem 0.8rem;
            border-radius: 4px;
            font-size: 0.8rem;
            font-weight: 600;
            z-index: 2;
            transform: translateY(-20px);
            opacity: 0;
            transition: all 0.3s ease;
        }
        
        .gallery-item:hover .gallery-category-tag {
            transform: translateY(0);
            opacity: 1;
        }
        
        /* Fullscreen Gallery Modal */
        .gallery-modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.9);
            z-index: 1000;
            overflow: hidden;
        }
        
        .modal-content {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            max-width: 90%;
            max-height: 90vh;
        }
        
        .modal-content img {
            width: 100%;
            height: 100%;
            object-fit: contain;
            border-radius: 4px;
        }
        
        .modal-close {
            position: absolute;
            top: 20px;
            right: 20px;
            color: white;
            font-size: 30px;
            cursor: pointer;
            z-index: 1001;
        }
        
        .modal-nav {
            position: absolute;
            bottom: 20px;
            left: 50%;
            transform: translateX(-50%);
            display: flex;
            gap: 10px;
            z-index: 1001;
        }
        
        .modal-nav button {
            background: rgba(255, 255, 255, 0.2);
            border: none;
            color: white;
            width: 40px;
            height: 40px;
            border-radius: 50%;
            cursor: pointer;
            transition: background 0.3s ease;
        }
        
        .modal-nav button:hover {
            background: rgba(255, 255, 255, 0.3);
        }
        
        /* Masonry Layout for Gallery */
        @media screen and (min-width: 768px) {
            .gallery-grid {
                grid-template-columns: repeat(2, 1fr);
            }
            
            .gallery-item:nth-child(3n+1) {
                grid-row: span 2;
                aspect-ratio: 1/2;
            }
        }
        
        @media screen and (min-width: 1024px) {
            .gallery-grid {
                grid-template-columns: repeat(3, 1fr);
            }
        }
        
        /* Responsive Adjustments */
        @media screen and (max-width: 768px) {
            .gallery-heading h1 {
                font-size: 2.5rem;
            }
            
            .featured-swiper {
                height: 50vh;
            }
            
            .gallery-filters {
                overflow-x: auto;
                justify-content: flex-start;
                padding: 0.8rem;
                top: 80px;
                border-radius: 15px;
            }
            
            .filter-button {
                padding: 0.8rem 1.5rem;
                white-space: nowrap;
                font-size: 0.9rem;
            }
            
            .featured-caption h3 {
                font-size: 1.4rem;
            }
        }
        
        /* Animation */
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        .fade-in {
            animation: fadeIn 0.6s ease forwards;
        }
    </style>
</head>
<body>
    <header>
        <div class="logo-container">
            <img src="https://i.ibb.co/8nLpXxbm/Logo-INE.png" alt="Water Week Logo">
        </div>
        <nav>
            <ul>
                <li class="dropdown">
                    <a href="index.html#home" data-i18n="nav_home">Accueil</a>
                    <div class="dropdown-content">
                        <a href="index.html#about" data-i18n="nav_about">À propos</a>
                    </div>
                </li>
                <li class="dropdown">
                    <a href="index.html#themes" data-i18n="nav_program">Programme</a>
                    <div class="dropdown-content">
                        <a href="index.html#themes" data-i18n="nav_topics">Thèmes</a>
                        <a href="index.html#call-papers" data-i18n="nav_call_papers">Appel à communications</a>
                        <a href="index.html#program" data-i18n="nav_program">Programme</a>
                        <a href="index.html#speakers" data-i18n="nav_speakers">Intervenants</a>
                    </div>
                </li>
                <li class="dropdown">
                    <a href="index.html#practical-info" data-i18n="nav_info_media">Infos & Médias</a>
                    <div class="dropdown-content">
                        <a href="index.html#practical-info" data-i18n="nav_practical_info">Infos pratiques</a>
                        <a href="index.html#partners" data-i18n="nav_partners">Partenaires</a>
                        <a href="index.html#news" data-i18n="nav_news">Actualités</a>
                        <a href="gallery.html" class="active" data-i18n="nav_gallery">Galerie</a>
                        <a href="index.html#contact" data-i18n="nav_contact">Contact</a>
                    </div>
                </li>
            </ul>
        </nav>
        <div class="language-switch">
            <a href="#" data-lang="fr" class="active">FR</a>
            <a href="#" data-lang="en">EN</a>
        </div>
        <div class="mobile-menu-toggle">
            <span></span>
            <span></span>
            <span></span>
            <span></span>
        </div>
    </header>

    <main class="gallery-page">
        <div class="gallery-container">
            <div class="gallery-heading fade-in">
                <h1 data-i18n="gallery_title">Galerie Photos</h1>
                <p data-i18n="gallery_subtitle">Découvrez les moments forts et les souvenirs mémorables de la Semaine de l'Eau à travers notre collection d'images et de photographies exceptionnelles</p>
            </div>
            
            <!-- Menu de filtres simplifié -->
            <div class="simple-filters">
                <a href="#" class="simple-filter active" data-filter="all" data-i18n="gallery_all">Toutes les photos</a>
                <a href="#" class="simple-filter" data-filter="conferences" data-i18n="gallery_conferences">Conférences</a>
                <a href="#" class="simple-filter" data-filter="ateliers" data-i18n="gallery_workshops">Ateliers</a>
                <a href="#" class="simple-filter" data-filter="networking" data-i18n="gallery_networking">Networking</a>
                <a href="#" class="simple-filter" data-filter="visites" data-i18n="gallery_visits">Visites techniques</a>
            </div>
            
            <div class="featured-gallery fade-in">
                <div class="featured-heading">
                    <h2 data-i18n="gallery_featured">Images en vedette</h2>
                </div>
                
                <!-- Swiper -->
                <div class="swiper featured-swiper" id="featured-swiper">
                    <div class="swiper-wrapper" id="featured-wrapper">
                        <!-- Les slides seront chargées dynamiquement ici -->
                    </div>
                    <div class="swiper-button-next"></div>
                    <div class="swiper-button-prev"></div>
                    <div class="swiper-pagination"></div>
                    <div class="autoplay-progress">
                        <svg viewBox="0 0 48 48">
                            <circle cx="24" cy="24" r="20"></circle>
                        </svg>
                        <span></span>
                    </div>
                </div>
            </div>
            
            <div class="gallery-grid fade-in" id="gallery">
                <!-- Les images seront chargées dynamiquement ici -->
            </div>
            
            <!-- Modal pour vue en plein écran -->
            <div class="gallery-modal" id="gallery-modal">
                <div class="modal-close">&times;</div>
                <div class="modal-content">
                    <img id="modal-image" src="" alt="">
                </div>
                <div class="modal-nav">
                    <button id="modal-prev"><i class="fas fa-chevron-left"></i></button>
                    <button id="modal-next"><i class="fas fa-chevron-right"></i></button>
                </div>
            </div>
        </div>
    </main>

    <footer>
        <div class="container">
            <div class="footer-container">
                <div class="footer-col">
                    <img src="https://i.ibb.co/8nLpXxbm/Logo-INE.png" alt="Water Week Logo" class="footer-logo">
                    <p data-i18n="footer_description">La Semaine de l'Eau est un événement international qui rassemble experts et chercheurs autour des enjeux liés à l'eau dans le contexte des changements climatiques.</p>
                    <div class="social-links">
                        <a href="#" class="social-link" aria-label="Facebook"><i class="fab fa-facebook-f"></i></a>
                        <a href="#" class="social-link" aria-label="Twitter"><i class="fab fa-twitter"></i></a>
                        <a href="#" class="social-link" aria-label="LinkedIn"><i class="fab fa-linkedin-in"></i></a>
                        <a href="#" class="social-link" aria-label="Instagram"><i class="fab fa-instagram"></i></a>
                    </div>
                </div>
                <div class="footer-col">
                    <h3 data-i18n="footer_quick_links">Liens rapides</h3>
                    <ul>
                        <li><a href="index.html#home" data-i18n="nav_home">Accueil</a></li>
                        <li><a href="index.html#about" data-i18n="nav_about">À propos</a></li>
                        <li><a href="index.html#themes" data-i18n="nav_topics">Thèmes</a></li>
                        <li><a href="index.html#call-papers" data-i18n="nav_call_papers">Appel à communications</a></li>
                        <li><a href="index.html#program" data-i18n="nav_program">Programme</a></li>
                    </ul>
                </div>
                <div class="footer-col">
                    <h3 data-i18n="footer_information">Informations</h3>
                    <ul>
                        <li><a href="index.html#speakers" data-i18n="nav_speakers">Intervenants</a></li>
                        <li><a href="index.html#practical-info" data-i18n="nav_practical_info">Infos pratiques</a></li>
                        <li><a href="index.html#partners" data-i18n="nav_partners">Partenaires</a></li>
                        <li><a href="index.html#news" data-i18n="nav_news">Actualités</a></li>
                        <li><a href="gallery.html" data-i18n="nav_gallery">Galerie</a></li>
                    </ul>
                </div>
                <div class="footer-col">
                    <h3 data-i18n="contact_title">Contact</h3>
                    <ul>
                        <li><i class="fas fa-envelope"></i> <a href="mailto:contact@waterweek.org">contact@waterweek.org</a></li>
                        <li><i class="fas fa-phone"></i> <a href="tel:+22900000000">+229 00 00 00 00</a></li>
                        <li><i class="fas fa-map-marker-alt"></i> Palais des Congrès, Cotonou, Bénin</li>
                    </ul>
                </div>
            </div>
            <div class="copyright">
                <p data-i18n="footer_copyright">&copy; 2024 Semaine de l'Eau. Tous droits réservés. <a href="#" data-i18n="footer_legal">Mentions légales</a> | <a href="#" data-i18n="footer_privacy">Politique de confidentialité</a></p>
            </div>
        </div>
    </footer>

    <a href="#" class="back-to-top" aria-label="Retour en haut">
        <i class="fas fa-arrow-up"></i>
    </a>

    <!-- Swiper JS -->
    <script src="https://cdn.jsdelivr.net/npm/swiper@11/swiper-bundle.min.js"></script>
    <script src="js/main.js"></script>
    <script src="js/i18n.js"></script>
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // Fonction pour charger dynamiquement les liens des images
            async function loadImageLinks() {
                try {
                    const response = await fetch('les_images.md');
                    const text = await response.text();
                    return text.split('\n').filter(line => line.trim() !== '' && line.includes('https://i.ibb.co/'));
                } catch (error) {
                    // Suppression du log d'erreur pour l'utilisateur final
                    return [];
                }
            }
            
            // Liste des catégories et leurs traductions
            const categoriesFr = {
                conferences: 'Conférences',
                ateliers: 'Ateliers',
                networking: 'Networking',
                visites: 'Visites techniques'
            };
            
            const categoriesEn = {
                conferences: 'Conferences',
                ateliers: 'Workshops',
                networking: 'Networking',
                visites: 'Technical Visits'
            };
            
            // Fonction pour obtenir le nom traduit d'une catégorie
            function getCategoryName(category) {
                return currentLanguage === 'fr' ? categoriesFr[category] : categoriesEn[category];
            }
            
            // Fonction pour assigner une catégorie basée sur l'index de l'image
            function assignCategory(index) {
                const categoryKeys = Object.keys(categoriesFr);
                return categoryKeys[index % categoryKeys.length];
            }
            
            // Fonction pour générer une description basée sur la catégorie et la langue
            function generateCaption(category) {
                const captionsFr = {
                    conferences: [
                        'Session plénière sur la gestion des ressources en eau',
                        'Présentation des résultats de recherche sur l\'eau et le climat',
                        'Panel d\'experts internationaux sur la gouvernance de l\'eau',
                        'Séance de questions-réponses avec les spécialistes',
                        'Débat sur les enjeux transfrontaliers de l\'eau en Afrique'
                    ],
                    ateliers: [
                        'Atelier sur les technologies innovantes de traitement de l\'eau',
                        'Travail en groupe sur les solutions durables d\'accès à l\'eau',
                        'Formation pratique aux méthodes d\'analyse de qualité de l\'eau',
                        'Atelier sur les techniques d\'irrigation économes en eau',
                        'Session collaborative sur les politiques hydrauliques'
                    ],
                    networking: [
                        'Échanges entre chercheurs et décideurs pendant la pause-café',
                        'Rencontres professionnelles durant la session de posters',
                        'Discussions informelles entre participants internationaux',
                        'Cocktail de réseautage avec les partenaires institutionnels',
                        'Échanges d\'expériences entre experts et praticiens'
                    ],
                    visites: [
                        'Visite de la station de traitement d\'eau de Cotonou',
                        'Découverte des systèmes innovants de collecte des eaux pluviales',
                        'Visite de terrain dans le bassin versant de l\'Ouémé',
                        'Inspection technique du barrage de Nangbéto',
                        'Observation des écosystèmes aquatiques du lac Nokoué'
                    ]
                };
                
                const captionsEn = {
                    conferences: [
                        'Plenary session on water resource management',
                        'Presentation of research results on water and climate',
                        'International expert panel on water governance',
                        'Q&A session with specialists',
                        'Debate on transboundary water issues in Africa'
                    ],
                    ateliers: [
                        'Workshop on innovative water treatment technologies',
                        'Group work on sustainable water access solutions',
                        'Practical training on water quality analysis methods',
                        'Workshop on water-efficient irrigation techniques',
                        'Collaborative session on water policies'
                    ],
                    networking: [
                        'Exchanges between researchers and decision-makers during coffee break',
                        'Professional meetings during the poster session',
                        'Informal discussions between international participants',
                        'Networking cocktail with institutional partners',
                        'Exchange of experiences between experts and practitioners'
                    ],
                    visites: [
                        'Visit to Cotonou water treatment plant',
                        'Discovery of innovative rainwater collection systems',
                        'Field visit to the Ouémé watershed',
                        'Technical inspection of the Nangbéto dam',
                        'Observation of aquatic ecosystems of Lake Nokoué'
                    ]
                };
                
                const captions = currentLanguage === 'fr' ? captionsFr : captionsEn;
                const captionsForCategory = captions[category];
                return captionsForCategory[Math.floor(Math.random() * captionsForCategory.length)];
            }
            
            // Fonction pour générer un titre basé sur la catégorie et la langue
            function generateTitle(category) {
                const titlesFr = {
                    conferences: [
                        'Les experts internationaux réunis',
                        'Échange de connaissances',
                        'Perspectives croisées sur l\'eau',
                        'Discussions scientifiques animées',
                        'Partage d\'expertise'
                    ],
                    ateliers: [
                        'Apprentissage pratique',
                        'Collaboration et innovation',
                        'Développement de compétences',
                        'Solutions concrètes',
                        'Partage de techniques'
                    ],
                    networking: [
                        'Connexions professionnelles',
                        'Échanges informels',
                        'Rencontres interdisciplinaires',
                        'Construction de partenariats',
                        'Communauté de l\'eau'
                    ],
                    visites: [
                        'Découverte sur le terrain',
                        'Infrastructures hydrauliques',
                        'Observation pratique',
                        'Solutions locales',
                        'Écosystèmes aquatiques'
                    ]
                };
                
                const titlesEn = {
                    conferences: [
                        'International experts gathered',
                        'Knowledge exchange',
                        'Cross perspectives on water',
                        'Animated scientific discussions',
                        'Sharing expertise'
                    ],
                    ateliers: [
                        'Practical learning',
                        'Collaboration and innovation',
                        'Skills development',
                        'Concrete solutions',
                        'Technique sharing'
                    ],
                    networking: [
                        'Professional connections',
                        'Informal exchanges',
                        'Interdisciplinary meetings',
                        'Building partnerships',
                        'Water community'
                    ],
                    visites: [
                        'Field discovery',
                        'Hydraulic infrastructure',
                        'Practical observation',
                        'Local solutions',
                        'Aquatic ecosystems'
                    ]
                };
                
                const titles = currentLanguage === 'fr' ? titlesFr : titlesEn;
                const titlesForCategory = titles[category];
                return titlesForCategory[Math.floor(Math.random() * titlesForCategory.length)];
            }
            
            // Initialisation de la galerie
            async function initializeGallery() {
                const imageLinks = await loadImageLinks();
                const featuredWrapper = document.getElementById('featured-wrapper');
                const galleryContainer = document.getElementById('gallery');
                const modal = document.getElementById('gallery-modal');
                const modalImage = document.getElementById('modal-image');
                const modalClose = document.querySelector('.modal-close');
                const modalPrev = document.getElementById('modal-prev');
                const modalNext = document.getElementById('modal-next');
                
                if (imageLinks.length === 0) {
                    // Suppression du log d'erreur
                    return;
                }
                
                let currentModalIndex = 0;
                const validImages = [];
                
                // Filtrer les images pour exclure les cartes, logos et autres images techniques
                const filteredLinks = imageLinks.filter(linkLine => {
                    // Exclure les images de cartes, logos et images techniques
                    return !linkLine.includes('carte-du-lieu') && 
                           !linkLine.includes('logo') && 
                           !linkLine.toLowerCase().includes('carte') &&
                           !linkLine.toLowerCase().includes('map');
                });
                
                // Créer les slides pour la galerie en vedette
                filteredLinks.forEach((linkLine, index) => {
                    const srcMatch = linkLine.match(/src="([^"]+)"/);
                    const altMatch = linkLine.match(/alt="([^"]+)"/);
                    
                    if (srcMatch && srcMatch[1] && srcMatch[1].startsWith('https://i.ibb.co/')) {
                        const imageUrl = srcMatch[1];
                        const imageAlt = altMatch && altMatch[1] ? altMatch[1] : `Image ${index + 1}`;
                        const category = assignCategory(index);
                        const caption = generateCaption(category);
                        const title = generateTitle(category);
                        
                        validImages.push({
                            url: imageUrl,
                            alt: imageAlt,
                            category: category,
                            caption: caption,
                            title: title
                        });
                        
                        // Ajouter uniquement les 10 premières images à la galerie en vedette
                        if (index < 10) {
                            // Créer un slide pour le carousel en vedette
                            const featuredSlide = document.createElement('div');
                            featuredSlide.className = 'swiper-slide featured-slide';
                            featuredSlide.setAttribute('data-category', category);
                            
                            const img = document.createElement('img');
                            img.src = imageUrl;
                            img.alt = imageAlt;
                            
                            const categoryTag = document.createElement('div');
                            categoryTag.className = 'featured-category';
                            categoryTag.textContent = getCategoryName(category);
                            
                            const captionDiv = document.createElement('div');
                            captionDiv.className = 'featured-caption';
                            
                            const captionTitle = document.createElement('h3');
                            captionTitle.textContent = title;
                            
                            const captionText = document.createElement('p');
                            captionText.textContent = caption;
                            
                            captionDiv.appendChild(captionTitle);
                            captionDiv.appendChild(captionText);
                            
                            featuredSlide.appendChild(img);
                            featuredSlide.appendChild(categoryTag);
                            featuredSlide.appendChild(captionDiv);
                            featuredWrapper.appendChild(featuredSlide);
                        }
                        
                        // Créer un élément pour la grille de galerie principale
                        if (index < 24) { // Limiter à 24 images pour la grille
                            const galleryItem = document.createElement('div');
                            galleryItem.className = 'gallery-item';
                            galleryItem.setAttribute('data-category', category);
                            galleryItem.setAttribute('data-index', index);
                            
                            const galleryImg = document.createElement('img');
                            galleryImg.src = imageUrl;
                            galleryImg.alt = imageAlt;
                            
                            const overlay = document.createElement('div');
                            overlay.className = 'gallery-item-overlay';
                            
                            const categoryTag = document.createElement('div');
                            categoryTag.className = 'gallery-category-tag';
                            categoryTag.textContent = getCategoryName(category);
                            
                            const galleryCaption = document.createElement('div');
                            galleryCaption.className = 'gallery-caption';
                            
                            const captionTitle = document.createElement('h4');
                            captionTitle.textContent = title;
                            
                            const captionText = document.createElement('p');
                            captionText.textContent = caption;
                            
                            galleryCaption.appendChild(captionTitle);
                            galleryCaption.appendChild(captionText);
                            
                            galleryItem.appendChild(galleryImg);
                            galleryItem.appendChild(overlay);
                            galleryItem.appendChild(categoryTag);
                            galleryItem.appendChild(galleryCaption);
                            galleryContainer.appendChild(galleryItem);
                            
                            // Ouvrir le modal en cliquant sur une image
                            galleryItem.addEventListener('click', () => {
                                modalImage.src = imageUrl;
                                modalImage.alt = imageAlt;
                                currentModalIndex = index;
                                modal.style.display = 'block';
                                document.body.style.overflow = 'hidden';
                            });
                        }
                    }
                });
                
                // Gérer la navigation dans le modal
                modalClose.addEventListener('click', () => {
                    modal.style.display = 'none';
                    document.body.style.overflow = 'auto';
                });
                
                modalPrev.addEventListener('click', () => {
                    currentModalIndex = (currentModalIndex - 1 + validImages.length) % validImages.length;
                    modalImage.src = validImages[currentModalIndex].url;
                    modalImage.alt = validImages[currentModalIndex].alt;
                });
                
                modalNext.addEventListener('click', () => {
                    currentModalIndex = (currentModalIndex + 1) % validImages.length;
                    modalImage.src = validImages[currentModalIndex].url;
                    modalImage.alt = validImages[currentModalIndex].alt;
                });
                
                // Fermer le modal en cliquant à l'extérieur de l'image
                modal.addEventListener('click', (e) => {
                    if (e.target === modal) {
                        modal.style.display = 'none';
                        document.body.style.overflow = 'auto';
                    }
                });
                
                // Initialiser Swiper pour la galerie en vedette
                const progressCircle = document.querySelector(".autoplay-progress svg");
                const progressContent = document.querySelector(".autoplay-progress span");
                
                const featuredSwiper = new Swiper('.featured-swiper', {
                    slidesPerView: 1,
                    spaceBetween: 30,
                    centeredSlides: true,
                    loop: true,
                    autoplay: {
                        delay: 3500,
                        disableOnInteraction: false
                    },
                    pagination: {
                        el: '.swiper-pagination',
                        clickable: true
                    },
                    navigation: {
                        nextEl: '.swiper-button-next',
                        prevEl: '.swiper-button-prev'
                    },
                    on: {
                        autoplayTimeLeft(s, time, progress) {
                            progressCircle.style.setProperty("--progress", 1 - progress);
                            progressContent.textContent = `${Math.ceil(time / 1000)}s`;
                        }
                    }
                });
                
                // Gérer les filtres (mise à jour pour les nouveaux filtres)
                const filterLinks = document.querySelectorAll('.simple-filter');
                
                filterLinks.forEach(link => {
                    link.addEventListener('click', (e) => {
                        e.preventDefault(); // Empêcher la navigation
                        const filterCategory = link.getAttribute('data-filter');
                        
                        // Mise à jour des liens actifs
                        filterLinks.forEach(l => l.classList.remove('active'));
                        link.classList.add('active');
                        
                        // Filtrer la grille de galerie
                        const galleryItems = document.querySelectorAll('.gallery-item');
                        galleryItems.forEach(item => {
                            const itemCategory = item.getAttribute('data-category');
                            if (filterCategory === 'all' || itemCategory === filterCategory) {
                                item.style.display = 'block';
                            } else {
                                item.style.display = 'none';
                            }
                        });
                    });
                });
            }
            
            // Initialiser la galerie
            initializeGallery();
            
            // Initialiser les autres fonctionnalités
            if (typeof initMobileMenu === 'function') initMobileMenu();
            if (typeof initHeaderScroll === 'function') initHeaderScroll();
            if (typeof initBackToTop === 'function') initBackToTop();
        });
    </script>
</body>
</html> 